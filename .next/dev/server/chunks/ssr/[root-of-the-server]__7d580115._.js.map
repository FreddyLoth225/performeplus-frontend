{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/StatSport%20Africa/Documents/performePLUS/performeplus-frontend/lib/api/query-client.ts"],"sourcesContent":["import { QueryClient } from '@tanstack/react-query'\r\n\r\nexport const queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n      staleTime: 1000 * 60 * 5, // 5 minutes\r\n      gcTime: 1000 * 60 * 10, // 10 minutes (anciennement cacheTime)\r\n      retry: 1,\r\n      refetchOnWindowFocus: false,\r\n    },\r\n  },\r\n})"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,cAAc,IAAI,4LAAW,CAAC;IACzC,gBAAgB;QACd,SAAS;YACP,WAAW,OAAO,KAAK;YACvB,QAAQ,OAAO,KAAK;YACpB,OAAO;YACP,sBAAsB;QACxB;IACF;AACF","debugId":null}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/StatSport%20Africa/Documents/performePLUS/performeplus-frontend/lib/api/client.ts"],"sourcesContent":["import axios from 'axios'\r\n\r\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000/api'\r\n\r\nexport const apiClient = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n  withCredentials: true, // Pour les cookies JWT\r\n})\r\n\r\n// Intercepteur pour ajouter le token\r\napiClient.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('access_token')\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`\r\n    }\r\n    return config\r\n  },\r\n  (error) => Promise.reject(error)\r\n)\r\n\r\n// Intercepteur pour refresh token\r\napiClient.interceptors.response.use(\r\n  (response) => response,\r\n  async (error) => {\r\n    const originalRequest = error.config\r\n\r\n    if (error.response?.status === 401 && !originalRequest._retry) {\r\n      originalRequest._retry = true\r\n\r\n      try {\r\n        const refreshToken = localStorage.getItem('refresh_token')\r\n        const response = await axios.post(`${API_BASE_URL}/token/refresh/`, {\r\n          refresh: refreshToken,\r\n        })\r\n\r\n        const { access } = response.data\r\n        localStorage.setItem('access_token', access)\r\n\r\n        originalRequest.headers.Authorization = `Bearer ${access}`\r\n        return apiClient(originalRequest)\r\n      } catch (refreshError) {\r\n        localStorage.removeItem('access_token')\r\n        localStorage.removeItem('refresh_token')\r\n        window.location.href = '/login'\r\n        return Promise.reject(refreshError)\r\n      }\r\n    }\r\n\r\n    return Promise.reject(error)\r\n  }\r\n)"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,eAAe,QAAQ,GAAG,CAAC,mBAAmB,IAAI;AAEjD,MAAM,YAAY,gJAAK,CAAC,MAAM,CAAC;IACpC,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;IACA,iBAAiB;AACnB;AAEA,qCAAqC;AACrC,UAAU,YAAY,CAAC,OAAO,CAAC,GAAG,CAChC,CAAC;IACC,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT,GACA,CAAC,QAAU,QAAQ,MAAM,CAAC;AAG5B,kCAAkC;AAClC,UAAU,YAAY,CAAC,QAAQ,CAAC,GAAG,CACjC,CAAC,WAAa,UACd,OAAO;IACL,MAAM,kBAAkB,MAAM,MAAM;IAEpC,IAAI,MAAM,QAAQ,EAAE,WAAW,OAAO,CAAC,gBAAgB,MAAM,EAAE;QAC7D,gBAAgB,MAAM,GAAG;QAEzB,IAAI;YACF,MAAM,eAAe,aAAa,OAAO,CAAC;YAC1C,MAAM,WAAW,MAAM,gJAAK,CAAC,IAAI,CAAC,GAAG,aAAa,eAAe,CAAC,EAAE;gBAClE,SAAS;YACX;YAEA,MAAM,EAAE,MAAM,EAAE,GAAG,SAAS,IAAI;YAChC,aAAa,OAAO,CAAC,gBAAgB;YAErC,gBAAgB,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,QAAQ;YAC1D,OAAO,UAAU;QACnB,EAAE,OAAO,cAAc;YACrB,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;YACvB,OAAO,QAAQ,MAAM,CAAC;QACxB;IACF;IAEA,OAAO,QAAQ,MAAM,CAAC;AACxB","debugId":null}},
    {"offset": {"line": 163, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/StatSport%20Africa/Documents/performePLUS/performeplus-frontend/lib/api/auth.service.ts"],"sourcesContent":["import { apiClient } from './client'\r\nimport { Utilisateur } from '@/lib/types'\r\n\r\nexport interface LoginCredentials {\r\n  email: string\r\n  password: string\r\n}\r\n\r\nexport interface RegisterData {\r\n  email: string\r\n  password: string\r\n  nom: string\r\n  prenoms: string\r\n  telephone?: string\r\n  langue?: string\r\n}\r\n\r\nexport interface AuthResponse {\r\n  access: string\r\n  refresh: string\r\n  user: Utilisateur\r\n}\r\n\r\nexport const authService = {\r\n  async login(credentials: LoginCredentials): Promise<AuthResponse> {\r\n    console.log('üîê Tentative de connexion...', credentials.email)\r\n    const response = await apiClient.post('/token/', credentials)\r\n    console.log('‚úÖ R√©ponse serveur:', response.data)\r\n    return response.data\r\n  },\r\n\r\n  async register(data: RegisterData): Promise<{ message: string; user: Utilisateur }> {\r\n    const response = await apiClient.post('/register/', data)\r\n    return response.data\r\n  },\r\n\r\n  async verifyEmail(token: string): Promise<{ message: string }> {\r\n    const response = await apiClient.get(`/verify-email/${token}/`)\r\n    return response.data\r\n  },\r\n\r\n  async requestPasswordReset(email: string): Promise<{ message: string }> {\r\n    const response = await apiClient.post('/password-reset/request/', { email })\r\n    return response.data\r\n  },\r\n\r\n  async confirmPasswordReset(token: string, password: string): Promise<{ message: string }> {\r\n    const response = await apiClient.post('/password-reset/confirm/', { token, password })\r\n    return response.data\r\n  },\r\n\r\n  async getCurrentUser(): Promise<Utilisateur> {\r\n    const response = await apiClient.get('/profil/')\r\n    return response.data\r\n  },\r\n\r\n  async logout(): Promise<void> {\r\n    // C√¥t√© client, on supprime juste les tokens\r\n    localStorage.removeItem('access_token')\r\n    localStorage.removeItem('refresh_token')\r\n  },\r\n}"],"names":[],"mappings":";;;;AAAA;;AAuBO,MAAM,cAAc;IACzB,MAAM,OAAM,WAA6B;QACvC,QAAQ,GAAG,CAAC,gCAAgC,YAAY,KAAK;QAC7D,MAAM,WAAW,MAAM,iIAAS,CAAC,IAAI,CAAC,WAAW;QACjD,QAAQ,GAAG,CAAC,sBAAsB,SAAS,IAAI;QAC/C,OAAO,SAAS,IAAI;IACtB;IAEA,MAAM,UAAS,IAAkB;QAC/B,MAAM,WAAW,MAAM,iIAAS,CAAC,IAAI,CAAC,cAAc;QACpD,OAAO,SAAS,IAAI;IACtB;IAEA,MAAM,aAAY,KAAa;QAC7B,MAAM,WAAW,MAAM,iIAAS,CAAC,GAAG,CAAC,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC;QAC9D,OAAO,SAAS,IAAI;IACtB;IAEA,MAAM,sBAAqB,KAAa;QACtC,MAAM,WAAW,MAAM,iIAAS,CAAC,IAAI,CAAC,4BAA4B;YAAE;QAAM;QAC1E,OAAO,SAAS,IAAI;IACtB;IAEA,MAAM,sBAAqB,KAAa,EAAE,QAAgB;QACxD,MAAM,WAAW,MAAM,iIAAS,CAAC,IAAI,CAAC,4BAA4B;YAAE;YAAO;QAAS;QACpF,OAAO,SAAS,IAAI;IACtB;IAEA,MAAM;QACJ,MAAM,WAAW,MAAM,iIAAS,CAAC,GAAG,CAAC;QACrC,OAAO,SAAS,IAAI;IACtB;IAEA,MAAM;QACJ,4CAA4C;QAC5C,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;IAC1B;AACF","debugId":null}},
    {"offset": {"line": 211, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/StatSport%20Africa/Documents/performePLUS/performeplus-frontend/lib/store/auth-store.ts"],"sourcesContent":["import { create } from 'zustand'\r\nimport { persist } from 'zustand/middleware'\r\nimport { Utilisateur } from '@/lib/types'\r\n\r\ninterface AuthState {\r\n  user: Utilisateur | null\r\n  isAuthenticated: boolean\r\n  setUser: (user: Utilisateur | null) => void\r\n  logout: () => void\r\n}\r\n\r\nexport const useAuthStore = create<AuthState>()(\r\n  persist(\r\n    (set) => ({\r\n      user: null,\r\n      isAuthenticated: false,\r\n      setUser: (user) =>\r\n        set({\r\n          user,\r\n          isAuthenticated: !!user,\r\n        }),\r\n      logout: () => {\r\n        localStorage.removeItem('access_token')\r\n        localStorage.removeItem('refresh_token')\r\n        set({ user: null, isAuthenticated: false })\r\n      },\r\n    }),\r\n    {\r\n      name: 'auth-storage',\r\n    }\r\n  )\r\n)"],"names":[],"mappings":";;;;AAAA;AACA;;;AAUO,MAAM,eAAe,IAAA,kJAAM,IAChC,IAAA,wJAAO,EACL,CAAC,MAAQ,CAAC;QACR,MAAM;QACN,iBAAiB;QACjB,SAAS,CAAC,OACR,IAAI;gBACF;gBACA,iBAAiB,CAAC,CAAC;YACrB;QACF,QAAQ;YACN,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YACxB,IAAI;gBAAE,MAAM;gBAAM,iBAAiB;YAAM;QAC3C;IACF,CAAC,GACD;IACE,MAAM;AACR","debugId":null}},
    {"offset": {"line": 241, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/StatSport%20Africa/Documents/performePLUS/performeplus-frontend/components/auth/user-loader.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useQuery } from '@tanstack/react-query'\r\nimport { authService } from '@/lib/api/auth.service'\r\nimport { useAuthStore } from '@/lib/store/auth-store'\r\n\r\nexport function UserLoader() {\r\n  const { user, setUser } = useAuthStore()\r\n  const hasToken = typeof window !== 'undefined' && !!localStorage.getItem('access_token')\r\n\r\n  const { data: currentUser } = useQuery({\r\n    queryKey: ['current-user'],\r\n    queryFn: () => authService.getCurrentUser(),\r\n    enabled: hasToken && !user,\r\n    retry: false,\r\n    staleTime: Infinity, // Ne pas refetch automatiquement\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (currentUser && !user) {\r\n      setUser(currentUser)\r\n    }\r\n  }, [currentUser, user, setUser])\r\n\r\n  return null // Composant invisible\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;AAOO,SAAS;IACd,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAA,6IAAY;IACtC,MAAM,WAAW,kDAAkB,eAAe,CAAC,CAAC,aAAa,OAAO,CAAC;IAEzE,MAAM,EAAE,MAAM,WAAW,EAAE,GAAG,IAAA,uLAAQ,EAAC;QACrC,UAAU;YAAC;SAAe;QAC1B,SAAS,IAAM,4IAAW,CAAC,cAAc;QACzC,SAAS,YAAY,CAAC;QACtB,OAAO;QACP,WAAW;IACb;IAEA,IAAA,kNAAS,EAAC;QACR,IAAI,eAAe,CAAC,MAAM;YACxB,QAAQ;QACV;IACF,GAAG;QAAC;QAAa;QAAM;KAAQ;IAE/B,OAAO,KAAK,sBAAsB;;AACpC","debugId":null}},
    {"offset": {"line": 282, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/StatSport%20Africa/Documents/performePLUS/performeplus-frontend/app/providers.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { QueryClientProvider } from '@tanstack/react-query'\r\nimport { queryClient } from '@/lib/api/query-client'\r\nimport { ReactNode } from 'react'\r\nimport { UserLoader } from '@/components/auth/user-loader'\r\n\r\nexport function Providers({ children }: { children: ReactNode }) {\r\n  return (\r\n    <QueryClientProvider client={queryClient}>\r\n      <UserLoader />\r\n      {children}\r\n    </QueryClientProvider>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOO,SAAS,UAAU,EAAE,QAAQ,EAA2B;IAC7D,qBACE,8OAAC,6MAAmB;QAAC,QAAQ,4IAAW;;0BACtC,8OAAC,mJAAU;;;;;YACV;;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 334, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/StatSport%20Africa/Documents/performePLUS/performeplus-frontend/components/auth/auth-guard.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { useRouter, usePathname } from 'next/navigation'\r\nimport { useAuthStore } from '@/lib/store/auth-store'\r\nimport { Loader2 } from 'lucide-react'\r\n\r\nconst PUBLIC_ROUTES = ['/', '/login', '/register', '/forgot-password']\r\n\r\nexport function AuthGuard({ children }: { children: React.ReactNode }) {\r\n  const router = useRouter()\r\n  const pathname = usePathname()\r\n  const { isAuthenticated } = useAuthStore()\r\n  const [isChecking, setIsChecking] = useState(true)\r\n  const [hasToken, setHasToken] = useState(false)\r\n\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined') {\r\n      const token = localStorage.getItem('access_token')\r\n      setHasToken(!!token)\r\n      setIsChecking(false)\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (isChecking) return\r\n\r\n    const isPublicRoute = PUBLIC_ROUTES.some(route => pathname.startsWith(route))\r\n    \r\n    // Si page prot√©g√©e et pas de token, rediriger vers login\r\n    if (!isPublicRoute && !hasToken) {\r\n      router.push('/login')\r\n    }\r\n    \r\n    // Si page auth et d√©j√† connect√©, rediriger vers dashboard\r\n    if ((pathname === '/login' || pathname === '/register') && hasToken && isAuthenticated) {\r\n      router.push('/dashboard')\r\n    }\r\n  }, [pathname, hasToken, isAuthenticated, router, isChecking])\r\n\r\n  // Afficher un loader pendant la v√©rification initiale\r\n  if (isChecking) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen bg-slate-50\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Afficher un loader si on redirige\r\n  const isPublicRoute = PUBLIC_ROUTES.some(route => pathname.startsWith(route))\r\n  if (!isPublicRoute && !hasToken) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen bg-slate-50\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return <>{children}</>\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOA,MAAM,gBAAgB;IAAC;IAAK;IAAU;IAAa;CAAmB;AAE/D,SAAS,UAAU,EAAE,QAAQ,EAAiC;IACnE,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,WAAW,IAAA,iJAAW;IAC5B,MAAM,EAAE,eAAe,EAAE,GAAG,IAAA,6IAAY;IACxC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,IAAA,kNAAS,EAAC;QACR;;IAKF,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,IAAI,YAAY;QAEhB,MAAM,gBAAgB,cAAc,IAAI,CAAC,CAAA,QAAS,SAAS,UAAU,CAAC;QAEtE,yDAAyD;QACzD,IAAI,CAAC,iBAAiB,CAAC,UAAU;YAC/B,OAAO,IAAI,CAAC;QACd;QAEA,0DAA0D;QAC1D,IAAI,CAAC,aAAa,YAAY,aAAa,WAAW,KAAK,YAAY,iBAAiB;YACtF,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAU;QAAU;QAAiB;QAAQ;KAAW;IAE5D,sDAAsD;IACtD,IAAI,YAAY;QACd,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC,4NAAO;gBAAC,WAAU;;;;;;;;;;;IAGzB;IAEA,oCAAoC;IACpC,MAAM,gBAAgB,cAAc,IAAI,CAAC,CAAA,QAAS,SAAS,UAAU,CAAC;IACtE,IAAI,CAAC,iBAAiB,CAAC,UAAU;QAC/B,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC,4NAAO;gBAAC,WAAU;;;;;;;;;;;IAGzB;IAEA,qBAAO;kBAAG;;AACZ","debugId":null}}]
}