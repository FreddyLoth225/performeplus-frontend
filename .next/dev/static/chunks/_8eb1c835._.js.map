{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/StatSport%20Africa/Documents/performePLUS/performeplus-frontend/lib/api/query-client.ts"],"sourcesContent":["import { QueryClient } from '@tanstack/react-query'\r\n\r\nexport const queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n      staleTime: 1000 * 60 * 5, // 5 minutes\r\n      gcTime: 1000 * 60 * 10, // 10 minutes (anciennement cacheTime)\r\n      retry: 1,\r\n      refetchOnWindowFocus: false,\r\n    },\r\n  },\r\n})"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,cAAc,IAAI,+LAAW,CAAC;IACzC,gBAAgB;QACd,SAAS;YACP,WAAW,OAAO,KAAK;YACvB,QAAQ,OAAO,KAAK;YACpB,OAAO;YACP,sBAAsB;QACxB;IACF;AACF","debugId":null}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/StatSport%20Africa/Documents/performePLUS/performeplus-frontend/lib/store/auth-store.ts"],"sourcesContent":["import { create } from 'zustand'\r\nimport { persist } from 'zustand/middleware'\r\nimport { Utilisateur } from '@/lib/types'\r\n\r\ninterface AuthState {\r\n  user: Utilisateur | null\r\n  isAuthenticated: boolean\r\n  setUser: (user: Utilisateur | null) => void\r\n  logout: () => void\r\n}\r\n\r\nexport const useAuthStore = create<AuthState>()(\r\n  persist(\r\n    (set) => ({\r\n      user: null,\r\n      isAuthenticated: false,\r\n      setUser: (user) =>\r\n        set({\r\n          user,\r\n          isAuthenticated: !!user,\r\n        }),\r\n      logout: () => {\r\n        localStorage.removeItem('access_token')\r\n        localStorage.removeItem('refresh_token')\r\n        set({ user: null, isAuthenticated: false })\r\n      },\r\n    }),\r\n    {\r\n      name: 'auth-storage',\r\n    }\r\n  )\r\n)"],"names":[],"mappings":";;;;AAAA;AACA;;;AAUO,MAAM,eAAe,IAAA,qJAAM,IAChC,IAAA,2JAAO,EACL,CAAC,MAAQ,CAAC;QACR,MAAM;QACN,iBAAiB;QACjB,SAAS,CAAC,OACR,IAAI;gBACF;gBACA,iBAAiB,CAAC,CAAC;YACrB;QACF,QAAQ;YACN,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YACxB,IAAI;gBAAE,MAAM;gBAAM,iBAAiB;YAAM;QAC3C;IACF,CAAC,GACD;IACE,MAAM;AACR","debugId":null}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/StatSport%20Africa/Documents/performePLUS/performeplus-frontend/lib/api/client.ts"],"sourcesContent":["// lib/api/client.ts\r\nimport axios, { type InternalAxiosRequestConfig } from 'axios'\r\n\r\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000/api'\r\n\r\nexport const apiClient = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n  withCredentials: false, // On utilise Authorization: Bearer\r\n})\r\n\r\n// Intercepteur pour ajouter le token\r\napiClient.interceptors.request.use(\r\n  (config: InternalAxiosRequestConfig) => {\r\n  const token = typeof window !== 'undefined' ? localStorage.getItem('access_token') : null\r\n    if (token && config.headers) {\r\n      config.headers.Authorization = `Bearer ${token}`\r\n    }\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      console.log('üì§ Requ√™te:', config.method?.toUpperCase(), config.url, config.headers.Authorization ? '‚úÖ Token pr√©sent' : '‚ùå Pas de token')\r\n    }\r\n    return config\r\n  },\r\n  (error) => {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      console.error('‚ùå Erreur intercepteur request:', error)\r\n    }\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// Intercepteur pour refresh token\r\napiClient.interceptors.response.use(\r\n  (response) => {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      console.log('üì• R√©ponse:', response.config.url, response.status)\r\n    }\r\n    return response\r\n  },\r\n  async (error) => {\r\n    const originalRequest = error.config\r\n\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      console.error('‚ùå Erreur API:', error.response?.status, error.config?.url)\r\n    }\r\n\r\n    if (error.response?.status === 401 && !originalRequest._retry) {\r\n      originalRequest._retry = true\r\n      console.log('üîÑ Tentative de refresh token...')\r\n\r\n      try {\r\n        const refreshToken = typeof window !== 'undefined' ? localStorage.getItem('refresh_token') : null\r\n        \r\n        if (!refreshToken) {\r\n          throw new Error('Pas de refresh token')\r\n        }\r\n\r\n        const response = await axios.post(`${API_BASE_URL}/token/refresh/`, {\r\n          refresh: refreshToken,\r\n        })\r\n\r\n        const { access } = response.data\r\n        if (typeof window !== 'undefined') {\r\n          localStorage.setItem('access_token', access)\r\n        }\r\n        console.log('‚úÖ Token refresh√© avec succ√®s')\r\n\r\n        originalRequest.headers.Authorization = `Bearer ${access}`\r\n        return apiClient(originalRequest)\r\n      } catch (refreshError) {\r\n        console.error('‚ùå √âchec du refresh token:', refreshError)\r\n        localStorage.removeItem('access_token')\r\n        localStorage.removeItem('refresh_token')\r\n        \r\n        // Ne rediriger que si on est c√¥t√© client\r\n        if (typeof window !== 'undefined') {\r\n          window.location.href = '/login'\r\n        }\r\n        \r\n        return Promise.reject(refreshError)\r\n      }\r\n    }\r\n\r\n    return Promise.reject(error)\r\n  }\r\n)"],"names":[],"mappings":"AAAA,oBAAoB;;;;;AAGC;AAFrB;;AAEA,MAAM,eAAe,2KAAO,CAAC,GAAG,CAAC,mBAAmB,IAAI;AAEjD,MAAM,YAAY,mJAAK,CAAC,MAAM,CAAC;IACpC,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;IACA,iBAAiB;AACnB;AAEA,qCAAqC;AACrC,UAAU,YAAY,CAAC,OAAO,CAAC,GAAG,CAChC,CAAC;IACD,MAAM,QAAQ,uCAAgC,aAAa,OAAO,CAAC,kBAAkB;IACnF,IAAI,SAAS,OAAO,OAAO,EAAE;QAC3B,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,wCAA2C;QACzC,QAAQ,GAAG,CAAC,eAAe,OAAO,MAAM,EAAE,eAAe,OAAO,GAAG,EAAE,OAAO,OAAO,CAAC,aAAa,GAAG,oBAAoB;IAC1H;IACA,OAAO;AACT,GACA,CAAC;IACC,wCAA2C;QACzC,QAAQ,KAAK,CAAC,kCAAkC;IAClD;IACA,OAAO,QAAQ,MAAM,CAAC;AACxB;AAGF,kCAAkC;AAClC,UAAU,YAAY,CAAC,QAAQ,CAAC,GAAG,CACjC,CAAC;IACC,wCAA2C;QACzC,QAAQ,GAAG,CAAC,eAAe,SAAS,MAAM,CAAC,GAAG,EAAE,SAAS,MAAM;IACjE;IACA,OAAO;AACT,GACA,OAAO;IACL,MAAM,kBAAkB,MAAM,MAAM;IAEpC,wCAA2C;QACzC,QAAQ,KAAK,CAAC,iBAAiB,MAAM,QAAQ,EAAE,QAAQ,MAAM,MAAM,EAAE;IACvE;IAEA,IAAI,MAAM,QAAQ,EAAE,WAAW,OAAO,CAAC,gBAAgB,MAAM,EAAE;QAC7D,gBAAgB,MAAM,GAAG;QACzB,QAAQ,GAAG,CAAC;QAEZ,IAAI;YACF,MAAM,eAAe,uCAAgC,aAAa,OAAO,CAAC,mBAAmB;YAE7F,IAAI,CAAC,cAAc;gBACjB,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,WAAW,MAAM,mJAAK,CAAC,IAAI,CAAC,GAAG,aAAa,eAAe,CAAC,EAAE;gBAClE,SAAS;YACX;YAEA,MAAM,EAAE,MAAM,EAAE,GAAG,SAAS,IAAI;YAChC,wCAAmC;gBACjC,aAAa,OAAO,CAAC,gBAAgB;YACvC;YACA,QAAQ,GAAG,CAAC;YAEZ,gBAAgB,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,QAAQ;YAC1D,OAAO,UAAU;QACnB,EAAE,OAAO,cAAc;YACrB,QAAQ,KAAK,CAAC,6BAA6B;YAC3C,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YAExB,yCAAyC;YACzC,wCAAmC;gBACjC,OAAO,QAAQ,CAAC,IAAI,GAAG;YACzB;YAEA,OAAO,QAAQ,MAAM,CAAC;QACxB;IACF;IAEA,OAAO,QAAQ,MAAM,CAAC;AACxB","debugId":null}},
    {"offset": {"line": 141, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/StatSport%20Africa/Documents/performePLUS/performeplus-frontend/lib/api/auth.service.ts"],"sourcesContent":["// lib/api/auth.service.ts\r\nimport { apiClient } from './client'\r\nimport { Utilisateur } from '@/lib/types'\r\n\r\nexport interface LoginCredentials {\r\n  email: string\r\n  password: string\r\n}\r\n\r\nexport interface RegisterData {\r\n  email: string\r\n  password: string\r\n  nom: string\r\n  prenoms: string\r\n  telephone?: string\r\n  langue?: string\r\n}\r\n\r\nexport interface AuthResponse {\r\n  access: string\r\n  refresh: string\r\n}\r\n\r\nexport const authService = {\r\n  async login(credentials: LoginCredentials): Promise<Utilisateur> {\r\n    console.log('üîê Tentative de connexion...', credentials.email)\r\n    \r\n    // 1. Obtenir les tokens (backend: POST /login/)\r\n    const tokenResponse = await apiClient.post<{\r\n      access: string\r\n      refresh: string\r\n      user?: Partial<Utilisateur>\r\n    }>('/login/', credentials)\r\n    const { access, refresh } = tokenResponse.data\r\n    \r\n    console.log('‚úÖ Tokens re√ßus')\r\n    \r\n    // 2. Stocker les tokens\r\n    if (typeof window !== 'undefined') {\r\n      localStorage.setItem('access_token', access)\r\n      localStorage.setItem('refresh_token', refresh)\r\n    }\r\n    \r\n    // 3. R√©cup√©rer le profil utilisateur avec le nouveau token\r\n    const userResponse = await apiClient.get<Utilisateur>('/profil/')\r\n    console.log('‚úÖ Profil utilisateur r√©cup√©r√©:', userResponse.data)\r\n    \r\n    return userResponse.data\r\n  },\r\n\r\n  async register(data: RegisterData): Promise<{ message: string; user_id: string }> {\r\n    const response = await apiClient.post('/register/', data)\r\n    return response.data as { message: string; user_id: string }\r\n  },\r\n\r\n  async verifyEmail(token: string): Promise<{ message: string }> {\r\n    const response = await apiClient.get(`/verify-email/${token}/`)\r\n    return response.data\r\n  },\r\n\r\n  async requestPasswordReset(email: string): Promise<{ message: string }> {\r\n    const response = await apiClient.post('/password-reset/request/', { email })\r\n    return response.data\r\n  },\r\n\r\n  async confirmPasswordReset(token: string, password: string): Promise<{ message: string }> {\r\n    const response = await apiClient.post('/password-reset/confirm/', { token, password })\r\n    return response.data\r\n  },\r\n\r\n  async getCurrentUser(): Promise<Utilisateur> {\r\n    const response = await apiClient.get<Utilisateur>('/profil/')\r\n    return response.data\r\n  },\r\n\r\n  async logout(): Promise<void> {\r\n    if (typeof window !== 'undefined') {\r\n      localStorage.removeItem('access_token')\r\n      localStorage.removeItem('refresh_token')\r\n    }\r\n  },\r\n}"],"names":[],"mappings":"AAAA,0BAA0B;;;;;AAC1B;;AAsBO,MAAM,cAAc;IACzB,MAAM,OAAM,WAA6B;QACvC,QAAQ,GAAG,CAAC,gCAAgC,YAAY,KAAK;QAE7D,gDAAgD;QAChD,MAAM,gBAAgB,MAAM,oIAAS,CAAC,IAAI,CAIvC,WAAW;QACd,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,cAAc,IAAI;QAE9C,QAAQ,GAAG,CAAC;QAEZ,wBAAwB;QACxB,wCAAmC;YACjC,aAAa,OAAO,CAAC,gBAAgB;YACrC,aAAa,OAAO,CAAC,iBAAiB;QACxC;QAEA,2DAA2D;QAC3D,MAAM,eAAe,MAAM,oIAAS,CAAC,GAAG,CAAc;QACtD,QAAQ,GAAG,CAAC,kCAAkC,aAAa,IAAI;QAE/D,OAAO,aAAa,IAAI;IAC1B;IAEA,MAAM,UAAS,IAAkB;QAC/B,MAAM,WAAW,MAAM,oIAAS,CAAC,IAAI,CAAC,cAAc;QACpD,OAAO,SAAS,IAAI;IACtB;IAEA,MAAM,aAAY,KAAa;QAC7B,MAAM,WAAW,MAAM,oIAAS,CAAC,GAAG,CAAC,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC;QAC9D,OAAO,SAAS,IAAI;IACtB;IAEA,MAAM,sBAAqB,KAAa;QACtC,MAAM,WAAW,MAAM,oIAAS,CAAC,IAAI,CAAC,4BAA4B;YAAE;QAAM;QAC1E,OAAO,SAAS,IAAI;IACtB;IAEA,MAAM,sBAAqB,KAAa,EAAE,QAAgB;QACxD,MAAM,WAAW,MAAM,oIAAS,CAAC,IAAI,CAAC,4BAA4B;YAAE;YAAO;QAAS;QACpF,OAAO,SAAS,IAAI;IACtB;IAEA,MAAM;QACJ,MAAM,WAAW,MAAM,oIAAS,CAAC,GAAG,CAAc;QAClD,OAAO,SAAS,IAAI;IACtB;IAEA,MAAM;QACJ,wCAAmC;YACjC,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;QAC1B;IACF;AACF","debugId":null}},
    {"offset": {"line": 204, "column": 0}, "map": {"version":3,"sources":["C:/Users/StatSport Africa/Documents/performePLUS/performeplus-frontend/components/auth/user-loader.tsx"],"sourcesContent":["// components/auth/user-loader.tsx\r\n'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useAuthStore } from '@/lib/store/auth-store'\r\nimport { authService } from '@/lib/api/auth.service'\r\nimport { useQuery } from '@tanstack/react-query'\r\n\r\nexport function UserLoader() {\r\n  const { setUser } = useAuthStore()\r\n\r\n  // Charger l'utilisateur uniquement si un token existe\r\n  const { data: user, isSuccess } = useQuery({\r\n    queryKey: ['currentUser'],\r\n    queryFn: authService.getCurrentUser,\r\n    retry: false,\r\n    enabled: !!localStorage.getItem('access_token'),\r\n    staleTime: Infinity, // Ne pas refetch automatiquement\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (isSuccess && user) {\r\n      console.log('üë§ Utilisateur charg√©:', user)\r\n      setUser(user)\r\n    }\r\n  }, [user, isSuccess, setUser])\r\n\r\n  return null\r\n}"],"names":["c","_c","useEffect","useAuthStore","authService","useQuery","UserLoader","$","$i","Symbol","for","setUser","t0","t1","queryKey","queryFn","getCurrentUser","retry","enabled","localStorage","getItem","staleTime","Infinity","data","user","isSuccess","t2","t3","UserLoader[useEffect()]","console","log"],"mappings":"AAAA,kCAAA;;;;;AACY,SAAAA,CAAA,IAAAC,EAAA;AAEZ,SAASC,SAAS,QAAQ,OAAO;AACjC,SAASC,YAAY,QAAQ,wBAAwB;AACrD,SAASC,WAAW,QAAQ,wBAAwB;AACpD,SAASC,QAAQ,QAAQ,uBAAuB;;AALhD,YAAY;;;;;;AAOL;;IAAA,MAAAE,CAAA,OAAAN,gLAAA,EAAA;IAAA,IAAAM,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IACL,MAAA,EAAAI,OAAAA,EAAA;IAAkC,IAAAC,EAAA;IAAA,IAAAL,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAItBE,EAAA,GAAA;YAAC,aAAa;SAAC;QAAAL,CAAA,CAAA,EAAA,GAAAK,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAL,CAAA,CAAA,EAAA;IAAA;IAAA,IAAAM,EAAA;IAAA,IAAAN,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QADgBG,EAAA,GAAA;YAAAC,QAAA,EAC/BF,EAAe;YAAAG,OAAA,EAChBX,+IAAW,CAAAY,cAAe;YAAAC,KAAA,EAC5B,KAAK;YAAAC,OAAA,EACH,CAAC,CAACC,YAAY,CAAAC,OAAQ,CAAC,cAAc,CAAC;YAAAC,SAAA,EACpCC;QACb,CAAC;QAAAf,CAAA,CAAA,EAAA,GAAAM,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAN,CAAA,CAAA,EAAA;IAAA;IAND,MAAA,EAAAgB,IAAA,EAAAC,IAAA,EAAAC,SAAAA,EAAA,mMAA2CZ,EAM1C,CAAC;IAAA,IAAAa,EAAA;IAAA,IAAAC,EAAA;IAAA,IAAApB,CAAA,CAAA,EAAA,KAAAkB,SAAA,IAAAlB,CAAA,CAAA,EAAA,KAAAI,OAAA,IAAAJ,CAAA,CAAA,EAAA,KAAAiB,IAAA,EAAA;QAEQE,EAAA,GAAA,CAAA;YAAA,2BAAAE,CAAA;gBACR,IAAIH,SAAiB,IAAjBD,IAAiB,EAAA;oBACnBK,OAAO,CAAAC,GAAI,CAAC,qCAAwB,EAAEN,IAAI,CAAC;oBAC3Cb,OAAO,CAACa,IAAI,CAAC;gBAAA;YACd;SAAA,CAAA,CAAA,0BACF;QAAEG,EAAA,GAAA;YAACH,IAAI;YAAEC,SAAS;YAAEd,OAAO;SAAC;QAAAJ,CAAA,CAAA,EAAA,GAAAkB,SAAA;QAAAlB,CAAA,CAAA,EAAA,GAAAI,OAAA;QAAAJ,CAAA,CAAA,EAAA,GAAAiB,IAAA;QAAAjB,CAAA,CAAA,EAAA,GAAAmB,EAAA;QAAAnB,CAAA,CAAA,EAAA,GAAAoB,EAAA;IAAA,OAAA;QAAAD,EAAA,GAAAnB,CAAA,CAAA,EAAA;QAAAoB,EAAA,GAAApB,CAAA,CAAA,EAAA;IAAA;QAL7BL,0KAAS,EAACwB,EAKT,EAAEC,EAA0B,CAAC;IAAA,OAEvB,IAAI;AAAA;;;QAlBSxB,gJAAY,CAAC,CAAC;QAGAE,0LAAQ;;;KAJrCC,WAAA","ignoreList":[],"debugId":null}},
    {"offset": {"line": 298, "column": 0}, "map": {"version":3,"sources":["C:/Users/StatSport Africa/Documents/performePLUS/performeplus-frontend/app/providers.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { QueryClientProvider } from '@tanstack/react-query'\r\nimport { queryClient } from '@/lib/api/query-client'\r\nimport { ReactNode } from 'react'\r\nimport { UserLoader } from '@/components/auth/user-loader'\r\n\r\nexport function Providers({ children }: { children: ReactNode }) {\r\n  return (\r\n    <QueryClientProvider client={queryClient}>\r\n      <UserLoader />\r\n      {children}\r\n    </QueryClientProvider>\r\n  )\r\n}"],"names":["c","_c","QueryClientProvider","queryClient","ReactNode","UserLoader","Providers","t0","$","$i","Symbol","for","children","t1","t2"],"mappings":";;;;;AAAY,SAAAA,CAAA,IAAAC,EAAA;AAEZ,SAASC,mBAAmB,QAAQ,uBAAuB;AAC3D,SAASC,WAAW,QAAQ,wBAAwB;AAEpD,SAASE,UAAU,QAAQ,+BAA+B;AAL1D,YAAY;;;;;;AAOL,mBAAAE,EAAA;IAAA,MAAAC,CAAA,OAAAP,gLAAA,EAAA;IAAA,IAAAO,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IAAmB,MAAA,EAAAI,QAAAA,EAAA,GAAAL,EAAqC;IAAA,IAAAM,EAAA;IAAA,IAAAL,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAGzDE,EAAA,iBAAA,6LAAC,sJAAU,GAAG;;;;;QAAAL,CAAA,CAAA,EAAA,GAAAK,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAL,CAAA,CAAA,EAAA;IAAA;IAAA,IAAAM,EAAA;IAAA,IAAAN,CAAA,CAAA,EAAA,KAAAI,QAAA,EAAA;QADhBE,EAAA,iBAAA,6LAAC,gNAAmB;YAASX,MAAW,CAAXA,CAAAA,+IAAU,CAAC,CACtC;;gBAAAU,EAAa,CACZD;gBAAAA,QAAO,CACV,EAHC,mBAAmB,CAGE;;;;;;;QAAAJ,CAAA,CAAA,EAAA,GAAAI,QAAA;QAAAJ,CAAA,CAAA,EAAA,GAAAM,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAN,CAAA,CAAA,EAAA;IAAA;IAAA,OAHtBM,EAGsB;AAAA;KALnBR","ignoreList":[],"debugId":null}},
    {"offset": {"line": 363, "column": 0}, "map": {"version":3,"sources":["C:/Users/StatSport Africa/Documents/performePLUS/performeplus-frontend/components/auth/auth-guard.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { useRouter, usePathname } from 'next/navigation'\r\nimport { useAuthStore } from '@/lib/store/auth-store'\r\nimport { Loader2 } from 'lucide-react'\r\n\r\nconst PUBLIC_ROUTES = ['/', '/login', '/register', '/forgot-password']\r\n\r\nexport function AuthGuard({ children }: { children: React.ReactNode }) {\r\n  const router = useRouter()\r\n  const pathname = usePathname()\r\n  const { isAuthenticated } = useAuthStore()\r\n  const [isChecking, setIsChecking] = useState(true)\r\n  const [hasToken, setHasToken] = useState(false)\r\n\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined') {\r\n      const token = localStorage.getItem('access_token')\r\n      setHasToken(!!token)\r\n      setIsChecking(false)\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (isChecking) return\r\n\r\n    const isPublicRoute = PUBLIC_ROUTES.some(route => pathname.startsWith(route))\r\n    \r\n    // Si page prot√©g√©e et pas de token, rediriger vers login\r\n    if (!isPublicRoute && !hasToken) {\r\n      router.push('/login')\r\n    }\r\n    \r\n    // Si page auth et d√©j√† connect√©, rediriger vers dashboard\r\n    if ((pathname === '/login' || pathname === '/register') && hasToken && isAuthenticated) {\r\n      router.push('/dashboard')\r\n    }\r\n  }, [pathname, hasToken, isAuthenticated, router, isChecking])\r\n\r\n  // Afficher un loader pendant la v√©rification initiale\r\n  if (isChecking) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen bg-slate-50\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Afficher un loader si on redirige\r\n  const isPublicRoute = PUBLIC_ROUTES.some(route => pathname.startsWith(route))\r\n  if (!isPublicRoute && !hasToken) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen bg-slate-50\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return <>{children}</>\r\n}"],"names":["c","_c","useEffect","useState","useRouter","usePathname","useAuthStore","Loader2","PUBLIC_ROUTES","AuthGuard","t0","$","$i","Symbol","for","children","router","pathname","isAuthenticated","isChecking","setIsChecking","hasToken","setHasToken","t1","t2","AuthGuard[useEffect()]","window","token","localStorage","getItem","t3","t4","isPublicRoute","some","route","startsWith","push","t5","isPublicRoute_0","route_0"],"mappings":"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","ignoreList":[],"debugId":null}}]
}