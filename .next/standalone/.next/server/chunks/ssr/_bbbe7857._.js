module.exports=[3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function i({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardFooter",()=>i,"CardHeader",()=>e,"CardTitle",()=>f])},15618,a=>{"use strict";let b=(0,a.i(70106).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},34432,a=>{"use strict";var b=a.i(33217),c=a.i(70025),d=a.i(37927),e=a.i(62477);let f={getMyTeams:async()=>(await e.apiClient.get("/equipes/")).data,getTeamDetails:async a=>(await e.apiClient.get(`/equipes/${a}/details/`)).data,getTeamMembers:async a=>(await e.apiClient.get(`/equipes/${a}/membres/`)).data,createTeam:async a=>(await e.apiClient.post("/equipes/create/",a)).data,updateTeam:async(a,b)=>(await e.apiClient.patch(`/equipes/${a}/`,b)).data,async getThresholds(a){let b=(await e.apiClient.get("/seuils/",{params:{equipe:a}})).data;return(console.log("Thresholds response:",b),b&&"object"==typeof b&&"results"in b)?b.results:Array.isArray(b)?b:[]},createThreshold:async a=>(await e.apiClient.post("/seuils/",a)).data,updateThreshold:async(a,b)=>(await e.apiClient.patch(`/seuils/${a}/`,b)).data,async deleteThreshold(a){await e.apiClient.delete(`/seuils/${a}/`)}};var g=a.i(23292);function h(){return(0,b.useQuery)({queryKey:["teams"],queryFn:()=>f.getMyTeams(),staleTime:3e5})}function i(a){return(0,b.useQuery)({queryKey:["team",a],queryFn:()=>f.getTeamDetails(a),enabled:!!a})}function j(a){return(0,b.useQuery)({queryKey:["team-members",a],queryFn:()=>f.getTeamMembers(a),enabled:!!a})}function k(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:({equipeId:a,data:b})=>f.updateTeam(a,b),onSuccess:(b,c)=>{a.invalidateQueries({queryKey:["team",c.equipeId]}),a.invalidateQueries({queryKey:["teams"]}),g.toast.success("ParamÃ¨tres de l'Ã©quipe mis Ã  jour")},onError:()=>{g.toast.error("Erreur lors de la mise Ã  jour des paramÃ¨tres")}})}function l(a){return(0,b.useQuery)({queryKey:["team-thresholds",a],queryFn:()=>f.getThresholds(a),enabled:!!a})}function m(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>f.createThreshold(a),onSuccess:b=>{a.invalidateQueries({queryKey:["team-thresholds",b.equipe]}),g.toast.success("Seuil personnalisÃ© crÃ©Ã©")},onError:()=>{g.toast.error("Erreur lors de la crÃ©ation du seuil")}})}function n(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:({seuilId:a,data:b})=>f.updateThreshold(a,b),onSuccess:b=>{a.invalidateQueries({queryKey:["team-thresholds",b.equipe]}),g.toast.success("Seuil personnalisÃ© mis Ã  jour")},onError:()=>{g.toast.error("Erreur lors de la mise Ã  jour du seuil")}})}function o(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:({seuilId:a,equipeId:b})=>f.deleteThreshold(a),onSuccess:(b,c)=>{a.invalidateQueries({queryKey:["team-thresholds",c.equipeId]}),g.toast.success("Seuil personnalisÃ© supprimÃ©")},onError:()=>{g.toast.error("Erreur lors de la suppression du seuil")}})}a.s(["useCreateThreshold",()=>m,"useDeleteThreshold",()=>o,"useTeamDetails",()=>i,"useTeamMembers",()=>j,"useTeamThresholds",()=>l,"useTeams",()=>h,"useUpdateTeam",()=>k,"useUpdateThreshold",()=>n],34432)},97204,a=>{"use strict";var b,c,d=((b={}).NORMAL="NORMAL",b.AGENT_PP="AGENT_PP",b.DIRECTEUR_PP="DIRECTEUR_PP",b),e=((c={}).OWNER="OWNER",c.STAFF="STAFF",c.PLAYER="PLAYER",c);a.s(["RoleEquipe",()=>e,"RolePlateforme",()=>d])},26112,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(36608),f=a.i(42550),g=a.i(34432),h=a.i(3130),i=a.i(40695),j=a.i(96221),k=a.i(15618),l=a.i(60246),m=a.i(97204);function n(){let a=(0,d.useRouter)(),{user:n}=(0,e.useAuthStore)(),{currentTeam:o,currentMembership:p,setCurrentTeam:q,clearTeam:r,setTeams:s}=(0,f.useTeamStore)(),{data:t,isLoading:u,isError:v}=(0,g.useTeams)();return((0,c.useEffect)(()=>{if(!t)return;if(s(t.map(a=>a.equipe)),0===t.length)return void r();let a=o?t.find(a=>a.equipe.id===o.id):null;a?(p?.id!==a.membership.id||p?.role!==a.membership.role)&&q(a.equipe,a.membership):q(t[0].equipe,t[0].membership)},[t,o,p,q,s,r]),(0,c.useEffect)(()=>{if(p&&!u){console.log("ðŸ”€ Redirection selon le rÃ´le:",p.role);let b={[m.RoleEquipe.PLAYER]:"/dashboard/player",[m.RoleEquipe.STAFF]:"/dashboard/staff",[m.RoleEquipe.OWNER]:"/dashboard/owner"}[p.role];b&&a.push(b)}},[p,a,u]),u)?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen gap-4",children:[(0,b.jsx)(j.Loader2,{className:"h-8 w-8 animate-spin text-primary"}),(0,b.jsx)("p",{className:"text-slate-600",children:"Chargement de vos Ã©quipes..."})]}):v?(0,b.jsx)("div",{className:"flex items-center justify-center h-screen p-8",children:(0,b.jsxs)(h.Card,{className:"max-w-md w-full",children:[(0,b.jsxs)(h.CardHeader,{className:"text-center",children:[(0,b.jsx)(h.CardTitle,{className:"text-red-600",children:"Erreur"}),(0,b.jsx)(h.CardDescription,{children:"Impossible de charger vos Ã©quipes"})]}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)(i.Button,{className:"w-full",onClick:()=>window.location.reload(),children:"RÃ©essayer"})})]})}):t&&0!==t.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen gap-4",children:[(0,b.jsx)(j.Loader2,{className:"h-8 w-8 animate-spin text-primary"}),(0,b.jsx)("p",{className:"text-slate-600",children:"Redirection vers votre espace..."})]}):(0,b.jsx)("div",{className:"flex items-center justify-center h-screen p-8",children:(0,b.jsxs)(h.Card,{className:"max-w-md w-full",children:[(0,b.jsxs)(h.CardHeader,{className:"text-center",children:[(0,b.jsx)("div",{className:"mx-auto w-12 h-12 rounded-full bg-slate-100 flex items-center justify-center mb-4",children:(0,b.jsx)(l.Users,{className:"h-6 w-6 text-slate-600"})}),(0,b.jsx)(h.CardTitle,{children:"Bienvenue sur PerformePLUS !"}),(0,b.jsx)(h.CardDescription,{children:"Vous n'appartenez Ã  aucune Ã©quipe pour le moment."})]}),(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"text-center text-sm text-slate-600",children:[(0,b.jsx)("p",{className:"mb-2",children:"Pour commencer :"}),(0,b.jsxs)("ul",{className:"space-y-2 text-left",children:[(0,b.jsx)("li",{children:"â€¢ Demandez Ã  un administrateur de vous inviter"}),(0,b.jsx)("li",{children:"â€¢ Ou crÃ©ez votre propre Ã©quipe"})]})]}),(0,b.jsxs)(i.Button,{className:"w-full",disabled:!0,children:[(0,b.jsx)(k.Plus,{className:"mr-2 h-4 w-4"}),"CrÃ©er une Ã©quipe"]}),(0,b.jsx)("p",{className:"text-xs text-center text-slate-500",children:"La crÃ©ation d'Ã©quipe nÃ©cessite une activation par notre support"})]})]})})}a.s(["default",()=>n])}];

//# sourceMappingURL=_bbbe7857._.js.map