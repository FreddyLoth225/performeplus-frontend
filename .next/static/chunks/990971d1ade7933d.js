(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var t=e.i(43476),s=e.i(932),r=e.i(47163);function a(e){let a,i,n,l,u=(0,s.c)(8);return u[0]!==e?({className:a,...i}=e,u[0]=e,u[1]=a,u[2]=i):(a=u[1],i=u[2]),u[3]!==a?(n=(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),u[3]=a,u[4]=n):n=u[4],u[5]!==i||u[6]!==n?(l=(0,t.jsx)("div",{"data-slot":"card",className:n,...i}),u[5]=i,u[6]=n,u[7]=l):l=u[7],l}function i(e){let a,i,n,l,u=(0,s.c)(8);return u[0]!==e?({className:a,...i}=e,u[0]=e,u[1]=a,u[2]=i):(a=u[1],i=u[2]),u[3]!==a?(n=(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),u[3]=a,u[4]=n):n=u[4],u[5]!==i||u[6]!==n?(l=(0,t.jsx)("div",{"data-slot":"card-header",className:n,...i}),u[5]=i,u[6]=n,u[7]=l):l=u[7],l}function n(e){let a,i,n,l,u=(0,s.c)(8);return u[0]!==e?({className:a,...i}=e,u[0]=e,u[1]=a,u[2]=i):(a=u[1],i=u[2]),u[3]!==a?(n=(0,r.cn)("leading-none font-semibold",a),u[3]=a,u[4]=n):n=u[4],u[5]!==i||u[6]!==n?(l=(0,t.jsx)("div",{"data-slot":"card-title",className:n,...i}),u[5]=i,u[6]=n,u[7]=l):l=u[7],l}function l(e){let a,i,n,l,u=(0,s.c)(8);return u[0]!==e?({className:a,...i}=e,u[0]=e,u[1]=a,u[2]=i):(a=u[1],i=u[2]),u[3]!==a?(n=(0,r.cn)("text-muted-foreground text-sm",a),u[3]=a,u[4]=n):n=u[4],u[5]!==i||u[6]!==n?(l=(0,t.jsx)("div",{"data-slot":"card-description",className:n,...i}),u[5]=i,u[6]=n,u[7]=l):l=u[7],l}function u(e){let a,i,n,l,u=(0,s.c)(8);return u[0]!==e?({className:a,...i}=e,u[0]=e,u[1]=a,u[2]=i):(a=u[1],i=u[2]),u[3]!==a?(n=(0,r.cn)("px-6",a),u[3]=a,u[4]=n):n=u[4],u[5]!==i||u[6]!==n?(l=(0,t.jsx)("div",{"data-slot":"card-content",className:n,...i}),u[5]=i,u[6]=n,u[7]=l):l=u[7],l}function c(e){let a,i,n,l,u=(0,s.c)(8);return u[0]!==e?({className:a,...i}=e,u[0]=e,u[1]=a,u[2]=i):(a=u[1],i=u[2]),u[3]!==a?(n=(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",a),u[3]=a,u[4]=n):n=u[4],u[5]!==i||u[6]!==n?(l=(0,t.jsx)("div",{"data-slot":"card-footer",className:n,...i}),u[5]=i,u[6]=n,u[7]=l):l=u[7],l}e.s(["Card",()=>a,"CardContent",()=>u,"CardDescription",()=>l,"CardFooter",()=>c,"CardHeader",()=>i,"CardTitle",()=>n])},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},31020,e=>{"use strict";var t=e.i(932),s=e.i(66027),r=e.i(54616),a=e.i(12598),i=e.i(15760);let n={getMyTeams:async()=>(await i.apiClient.get("/equipes/")).data,getTeamDetails:async e=>(await i.apiClient.get(`/equipes/${e}/details/`)).data,getTeamMembers:async e=>(await i.apiClient.get(`/equipes/${e}/membres/`)).data,createTeam:async e=>(await i.apiClient.post("/equipes/create/",e)).data,updateTeam:async(e,t)=>(await i.apiClient.patch(`/equipes/${e}/`,t)).data,async getThresholds(e){let t=(await i.apiClient.get("/seuils/",{params:{equipe:e}})).data;return(console.log("Thresholds response:",t),t&&"object"==typeof t&&"results"in t)?t.results:Array.isArray(t)?t:[]},createThreshold:async e=>(await i.apiClient.post("/seuils/",e)).data,updateThreshold:async(e,t)=>(await i.apiClient.patch(`/seuils/${e}/`,t)).data,async deleteThreshold(e){await i.apiClient.delete(`/seuils/${e}/`)}};var l=e.i(46696);function u(){let e,r=(0,t.c)(1);return r[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:["teams"],queryFn:c,staleTime:3e5},r[0]=e):e=r[0],(0,s.useQuery)(e)}function c(){return n.getMyTeams()}function o(e){let r,a,i,l=(0,t.c)(7);l[0]!==e?(r=["team",e],a=()=>n.getTeamDetails(e),l[0]=e,l[1]=r,l[2]=a):(r=l[1],a=l[2]);let u=!!e;return l[3]!==r||l[4]!==a||l[5]!==u?(i={queryKey:r,queryFn:a,enabled:u},l[3]=r,l[4]=a,l[5]=u,l[6]=i):i=l[6],(0,s.useQuery)(i)}function d(e){let r,a,i,l=(0,t.c)(7);l[0]!==e?(r=["team-members",e],a=()=>n.getTeamMembers(e),l[0]=e,l[1]=r,l[2]=a):(r=l[1],a=l[2]);let u=!!e;return l[3]!==r||l[4]!==a||l[5]!==u?(i={queryKey:r,queryFn:a,enabled:u},l[3]=r,l[4]=a,l[5]=u,l[6]=i):i=l[6],(0,s.useQuery)(i)}function m(){let e,s=(0,t.c)(2),i=(0,a.useQueryClient)();return s[0]!==i?(e={mutationFn:h,onSuccess:(e,t)=>{i.invalidateQueries({queryKey:["team",t.equipeId]}),i.invalidateQueries({queryKey:["teams"]}),l.toast.success("Paramètres de l'équipe mis à jour")},onError:p},s[0]=i,s[1]=e):e=s[1],(0,r.useMutation)(e)}function p(){l.toast.error("Erreur lors de la mise à jour des paramètres")}function h(e){let{equipeId:t,data:s}=e;return n.updateTeam(t,s)}function f(e){let r,a,i,l=(0,t.c)(7);l[0]!==e?(r=["team-thresholds",e],a=()=>n.getThresholds(e),l[0]=e,l[1]=r,l[2]=a):(r=l[1],a=l[2]);let u=!!e;return l[3]!==r||l[4]!==a||l[5]!==u?(i={queryKey:r,queryFn:a,enabled:u},l[3]=r,l[4]=a,l[5]=u,l[6]=i):i=l[6],(0,s.useQuery)(i)}function x(){let e,s=(0,t.c)(2),i=(0,a.useQueryClient)();return s[0]!==i?(e={mutationFn:j,onSuccess:e=>{i.invalidateQueries({queryKey:["team-thresholds",e.equipe]}),l.toast.success("Seuil personnalisé créé")},onError:y},s[0]=i,s[1]=e):e=s[1],(0,r.useMutation)(e)}function y(){l.toast.error("Erreur lors de la création du seuil")}function j(e){return n.createThreshold(e)}function T(){let e,s=(0,t.c)(2),i=(0,a.useQueryClient)();return s[0]!==i?(e={mutationFn:C,onSuccess:e=>{i.invalidateQueries({queryKey:["team-thresholds",e.equipe]}),l.toast.success("Seuil personnalisé mis à jour")},onError:b},s[0]=i,s[1]=e):e=s[1],(0,r.useMutation)(e)}function b(){l.toast.error("Erreur lors de la mise à jour du seuil")}function C(e){let{seuilId:t,data:s}=e;return n.updateThreshold(t,s)}function q(){let e,s=(0,t.c)(2),i=(0,a.useQueryClient)();return s[0]!==i?(e={mutationFn:v,onSuccess:(e,t)=>{i.invalidateQueries({queryKey:["team-thresholds",t.equipeId]}),l.toast.success("Seuil personnalisé supprimé")},onError:N},s[0]=i,s[1]=e):e=s[1],(0,r.useMutation)(e)}function N(){l.toast.error("Erreur lors de la suppression du seuil")}function v(e){let{seuilId:t}=e;return n.deleteThreshold(t)}e.s(["useCreateThreshold",()=>x,"useDeleteThreshold",()=>q,"useTeamDetails",()=>o,"useTeamMembers",()=>d,"useTeamThresholds",()=>f,"useTeams",()=>u,"useUpdateTeam",()=>m,"useUpdateThreshold",()=>T],31020)},48539,e=>{"use strict";var t,s,r=((t={}).NORMAL="NORMAL",t.AGENT_PP="AGENT_PP",t.DIRECTEUR_PP="DIRECTEUR_PP",t),a=((s={}).OWNER="OWNER",s.STAFF="STAFF",s.PLAYER="PLAYER",s);e.s(["RoleEquipe",()=>a,"RolePlateforme",()=>r])},71249,e=>{"use strict";var t=e.i(43476),s=e.i(932),r=e.i(71645),a=e.i(18566),i=e.i(58034),n=e.i(38552),l=e.i(31020),u=e.i(70065),c=e.i(67881),o=e.i(31278),d=e.i(7233),m=e.i(61911),p=e.i(48539);function h(){let e,h,y,j,T,b=(0,s.c)(28),C=(0,a.useRouter)();(0,i.useAuthStore)();let{currentTeam:q,currentMembership:N,setCurrentTeam:v,clearTeam:g,setTeams:E}=(0,n.useTeamStore)(),{data:w,isLoading:_,isError:R}=(0,l.useTeams)();if(b[0]!==g||b[1]!==N?.id||b[2]!==N?.role||b[3]!==q||b[4]!==v||b[5]!==E||b[6]!==w?(e=()=>{if(!w)return;if(E(w.map(x)),0===w.length)return void g();let e=q?w.find(e=>e.equipe.id===q.id):null;e?(N?.id!==e.membership.id||N?.role!==e.membership.role)&&v(e.equipe,e.membership):v(w[0].equipe,w[0].membership)},b[0]=g,b[1]=N?.id,b[2]=N?.role,b[3]=q,b[4]=v,b[5]=E,b[6]=w,b[7]=e):e=b[7],b[8]!==g||b[9]!==N||b[10]!==q||b[11]!==v||b[12]!==E||b[13]!==w?(h=[w,q,N,v,E,g],b[8]=g,b[9]=N,b[10]=q,b[11]=v,b[12]=E,b[13]=w,b[14]=h):h=b[14],(0,r.useEffect)(e,h),b[15]!==N||b[16]!==_||b[17]!==C?(y=()=>{if(N&&!_){console.log("\uD83D\uDD00 Redirection selon le rôle:",N.role);let e={[p.RoleEquipe.PLAYER]:"/dashboard/player",[p.RoleEquipe.STAFF]:"/dashboard/staff",[p.RoleEquipe.OWNER]:"/dashboard/owner"}[N.role];e&&C.push(e)}},j=[N,C,_],b[15]=N,b[16]=_,b[17]=C,b[18]=y,b[19]=j):(y=b[18],j=b[19]),(0,r.useEffect)(y,j),_){let e;return b[20]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen gap-4",children:[(0,t.jsx)(o.Loader2,{className:"h-8 w-8 animate-spin text-primary"}),(0,t.jsx)("p",{className:"text-slate-600",children:"Chargement de vos équipes..."})]}),b[20]=e):e=b[20],e}if(R){let e,s;return b[21]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsxs)(u.CardHeader,{className:"text-center",children:[(0,t.jsx)(u.CardTitle,{className:"text-red-600",children:"Erreur"}),(0,t.jsx)(u.CardDescription,{children:"Impossible de charger vos équipes"})]}),b[21]=e):e=b[21],b[22]===Symbol.for("react.memo_cache_sentinel")?(s=(0,t.jsx)("div",{className:"flex items-center justify-center h-screen p-8",children:(0,t.jsxs)(u.Card,{className:"max-w-md w-full",children:[e,(0,t.jsx)(u.CardContent,{children:(0,t.jsx)(c.Button,{className:"w-full",onClick:f,children:"Réessayer"})})]})}),b[22]=s):s=b[22],s}if(!w||0===w.length){let e,s,r,a;return b[23]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsxs)(u.CardHeader,{className:"text-center",children:[(0,t.jsx)("div",{className:"mx-auto w-12 h-12 rounded-full bg-slate-100 flex items-center justify-center mb-4",children:(0,t.jsx)(m.Users,{className:"h-6 w-6 text-slate-600"})}),(0,t.jsx)(u.CardTitle,{children:"Bienvenue sur PerformePLUS !"}),(0,t.jsx)(u.CardDescription,{children:"Vous n'appartenez à aucune équipe pour le moment."})]}),b[23]=e):e=b[23],b[24]===Symbol.for("react.memo_cache_sentinel")?(s=(0,t.jsx)("p",{className:"mb-2",children:"Pour commencer :"}),b[24]=s):s=b[24],b[25]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsxs)("div",{className:"text-center text-sm text-slate-600",children:[s,(0,t.jsxs)("ul",{className:"space-y-2 text-left",children:[(0,t.jsx)("li",{children:"• Demandez à un administrateur de vous inviter"}),(0,t.jsx)("li",{children:"• Ou créez votre propre équipe"})]})]}),b[25]=r):r=b[25],b[26]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)("div",{className:"flex items-center justify-center h-screen p-8",children:(0,t.jsxs)(u.Card,{className:"max-w-md w-full",children:[e,(0,t.jsxs)(u.CardContent,{className:"space-y-4",children:[r,(0,t.jsxs)(c.Button,{className:"w-full",disabled:!0,children:[(0,t.jsx)(d.Plus,{className:"mr-2 h-4 w-4"}),"Créer une équipe"]}),(0,t.jsx)("p",{className:"text-xs text-center text-slate-500",children:"La création d'équipe nécessite une activation par notre support"})]})]})}),b[26]=a):a=b[26],a}return b[27]===Symbol.for("react.memo_cache_sentinel")?(T=(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen gap-4",children:[(0,t.jsx)(o.Loader2,{className:"h-8 w-8 animate-spin text-primary"}),(0,t.jsx)("p",{className:"text-slate-600",children:"Redirection vers votre espace..."})]}),b[27]=T):T=b[27],T}function f(){return window.location.reload()}function x(e){return e.equipe}e.s(["default",()=>h])}]);