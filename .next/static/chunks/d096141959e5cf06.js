(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8655,38401,e=>{"use strict";var s=e.i(932),t=e.i(66027),a=e.i(54616),i=e.i(12598),n=e.i(15760);class r extends Error{seanceId;data;constructor(e,s,t){super(e),this.seanceId=s,this.data=t,this.name="ForceUpdateError"}}let l={async getSessions(e,s){let t=await n.apiClient.get("/seances/",{params:{equipe_id:e,...s}});return{seances:t.data?.seances??[],filters:t.data?.filters??{}}},async getSessionDetails(e){let s=await n.apiClient.get(`/seances/${e}/`);return s.data?.seance??s.data},async getCalendar(e,s,t){let a=await n.apiClient.get("/calendrier/",{params:{equipe_id:e,date_debut:s,date_fin:t}});return a.data?.seances??[]},createSession:async e=>(await n.apiClient.post("/seances/create/",e)).data,async updateSession(e,s,t){let a={...s};t?.forceUpdate&&(a.force_update=!0);try{return(await n.apiClient.patch(`/seances/${e}/`,a)).data}catch(t){if(t?.response?.status===409&&t.response.data?.requiresConfirmation)throw new r(t.response.data?.message??"Des RPE ont été saisis pour cette séance. Confirmez la modification pour continuer.",e,s);throw t}},async deleteSession(e){await n.apiClient.delete(`/seances/${e}/`)},duplicateSession:async(e,s={})=>(await n.apiClient.post(`/seances/${e}/duplicate/`,s)).data,convertSessionToTemplate:async(e,s)=>(await n.apiClient.post(`/seances/${e}/convert-to-template/`,s)).data,changeSessionStatus:async(e,s)=>(await n.apiClient.patch(`/seances/${e}/statut/`,{statut:s})).data};e.s(["ForceUpdateError",()=>r,"sessionService",0,l],38401);var c=e.i(46696);function o(e,a){let i,n,r,c=(0,s.c)(8);c[0]!==e||c[1]!==a?(i=["sessions",e,a],n=async()=>(await l.getSessions(e,a)).seances,c[0]=e,c[1]=a,c[2]=i,c[3]=n):(i=c[2],n=c[3]);let o=!!e;return c[4]!==i||c[5]!==n||c[6]!==o?(r={queryKey:i,queryFn:n,enabled:o},c[4]=i,c[5]=n,c[6]=o,c[7]=r):r=c[7],(0,t.useQuery)(r)}function d(e){let a,i,n,r=(0,s.c)(7);r[0]!==e?(a=["session",e],i=async()=>l.getSessionDetails(e),r[0]=e,r[1]=a,r[2]=i):(a=r[1],i=r[2]);let c=!!e;return r[3]!==a||r[4]!==i||r[5]!==c?(n={queryKey:a,queryFn:i,enabled:c},r[3]=a,r[4]=i,r[5]=c,r[6]=n):n=r[6],(0,t.useQuery)(n)}function u(e,a,i){let n,r,c,o=(0,s.c)(9);o[0]!==a||o[1]!==i||o[2]!==e?(n=["calendar",e,a,i],r=()=>l.getCalendar(e,a,i),o[0]=a,o[1]=i,o[2]=e,o[3]=n,o[4]=r):(n=o[3],r=o[4]);let d=!!e&&!!a&&!!i;return o[5]!==n||o[6]!==r||o[7]!==d?(c={queryKey:n,queryFn:r,enabled:d},o[5]=n,o[6]=r,o[7]=d,o[8]=c):c=o[8],(0,t.useQuery)(c)}function m(){let e,t=(0,s.c)(2),n=(0,i.useQueryClient)();return t[0]!==n?(e={mutationFn:p,onSuccess:e=>{n.invalidateQueries({queryKey:["sessions"]}),n.invalidateQueries({queryKey:["calendar"]}),c.toast.success(e.message||"Séance créée avec succès"),e.warnings?.forEach(h)},onError:x},t[0]=n,t[1]=e):e=t[1],(0,a.useMutation)(e)}function x(e){let s=e.response?.data?.message||"Erreur lors de la duplication";c.toast.error(s)}function h(e){return c.toast.info(e)}function p(e){return l.createSession(e)}function y(){let e,t=(0,s.c)(2),n=(0,i.useQueryClient)();return t[0]!==n?(e={mutationFn:j,onSuccess:e=>{n.invalidateQueries({queryKey:["sessions"]}),n.invalidateQueries({queryKey:["calendar"]}),n.invalidateQueries({queryKey:["session",e.seance.id]}),c.toast.success(e.message||"Statut modifié")},onError:f},t[0]=n,t[1]=e):e=t[1],(0,a.useMutation)(e)}function f(e){let s=e.response?.data?.error||"Erreur lors du changement de statut";c.toast.error(s)}function j(e){let{seanceId:s,statut:t}=e;return l.changeSessionStatus(s,t)}function g(){let e,t=(0,s.c)(2),n=(0,i.useQueryClient)();return t[0]!==n?(e={mutationFn:b,onSuccess:(e,s)=>{n.invalidateQueries({queryKey:["sessions"]}),n.invalidateQueries({queryKey:["calendar"]}),n.invalidateQueries({queryKey:["session",s.seanceId]}),c.toast.success(e.message||"Séance mise à jour"),e.warnings?.forEach(v)},onError:N},t[0]=n,t[1]=e):e=t[1],(0,a.useMutation)(e)}function N(e){if(e instanceof r)c.toast.info(e.message);else{let s=e.response?.data?.message||"Erreur lors de la mise à jour";c.toast.error(s)}}function v(e){return c.toast.info(e)}function b(e){let{seanceId:s,data:t,forceUpdate:a}=e;return l.updateSession(s,t,{forceUpdate:a})}function C(){let e,t=(0,s.c)(2),n=(0,i.useQueryClient)();return t[0]!==n?(e={mutationFn:w,onSuccess:()=>{n.invalidateQueries({queryKey:["sessions"]}),n.invalidateQueries({queryKey:["calendar"]}),c.toast.success("Séance supprimée")},onError:S},t[0]=n,t[1]=e):e=t[1],(0,a.useMutation)(e)}function S(e){let s=e.response?.data?.message||"Erreur lors de la suppression";c.toast.error(s)}function w(e){return l.deleteSession(e)}function E(){let e,t=(0,s.c)(2),n=(0,i.useQueryClient)();return t[0]!==n?(e={mutationFn:P,onSuccess:e=>{n.invalidateQueries({queryKey:["sessions"]}),n.invalidateQueries({queryKey:["calendar"]}),c.toast.success(e.message||"Séance dupliquée"),e.warnings?.forEach(D)},onError:T},t[0]=n,t[1]=e):e=t[1],(0,a.useMutation)(e)}function T(e){let s=e.response?.data?.message||"Erreur lors de la duplication";c.toast.error(s)}function D(e){return c.toast.info(e)}function P(e){let{seanceId:s,payload:t}=e;return l.duplicateSession(s,t)}e.s(["useCalendar",()=>u,"useChangeSessionStatus",()=>y,"useCreateSession",()=>m,"useDeleteSession",()=>C,"useDuplicateSession",()=>E,"useSession",()=>d,"useSessions",()=>o,"useUpdateSession",()=>g],8655)},95727,e=>{"use strict";var s=e.i(77241),t=e.i(81092);function a(e,a,i){let n=(0,t.toDate)(e,i?.in);return isNaN(a)?(0,s.constructFrom)(i?.in||e,NaN):(a&&n.setDate(n.getDate()+a),n)}e.s(["addDays",()=>a])},7233,e=>{"use strict";let s=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>s],7233)},33565,e=>{"use strict";var s=e.i(46349);e.s(["ChevronRightIcon",()=>s.default])},27612,e=>{"use strict";let s=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>s],27612)},31020,e=>{"use strict";var s=e.i(932),t=e.i(66027),a=e.i(54616),i=e.i(12598),n=e.i(15760);let r={getMyTeams:async()=>(await n.apiClient.get("/equipes/")).data,getTeamDetails:async e=>(await n.apiClient.get(`/equipes/${e}/details/`)).data,getTeamMembers:async e=>(await n.apiClient.get(`/equipes/${e}/membres/`)).data,createTeam:async e=>(await n.apiClient.post("/equipes/create/",e)).data,updateTeam:async(e,s)=>(await n.apiClient.patch(`/equipes/${e}/`,s)).data,async getThresholds(e){let s=(await n.apiClient.get("/seuils/",{params:{equipe:e}})).data;return(console.log("Thresholds response:",s),s&&"object"==typeof s&&"results"in s)?s.results:Array.isArray(s)?s:[]},createThreshold:async e=>(await n.apiClient.post("/seuils/",e)).data,updateThreshold:async(e,s)=>(await n.apiClient.patch(`/seuils/${e}/`,s)).data,async deleteThreshold(e){await n.apiClient.delete(`/seuils/${e}/`)}};var l=e.i(46696);function c(){let e,a=(0,s.c)(1);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:["teams"],queryFn:o,staleTime:3e5},a[0]=e):e=a[0],(0,t.useQuery)(e)}function o(){return r.getMyTeams()}function d(e){let a,i,n,l=(0,s.c)(7);l[0]!==e?(a=["team",e],i=()=>r.getTeamDetails(e),l[0]=e,l[1]=a,l[2]=i):(a=l[1],i=l[2]);let c=!!e;return l[3]!==a||l[4]!==i||l[5]!==c?(n={queryKey:a,queryFn:i,enabled:c},l[3]=a,l[4]=i,l[5]=c,l[6]=n):n=l[6],(0,t.useQuery)(n)}function u(e){let a,i,n,l=(0,s.c)(7);l[0]!==e?(a=["team-members",e],i=()=>r.getTeamMembers(e),l[0]=e,l[1]=a,l[2]=i):(a=l[1],i=l[2]);let c=!!e;return l[3]!==a||l[4]!==i||l[5]!==c?(n={queryKey:a,queryFn:i,enabled:c},l[3]=a,l[4]=i,l[5]=c,l[6]=n):n=l[6],(0,t.useQuery)(n)}function m(){let e,t=(0,s.c)(2),n=(0,i.useQueryClient)();return t[0]!==n?(e={mutationFn:h,onSuccess:(e,s)=>{n.invalidateQueries({queryKey:["team",s.equipeId]}),n.invalidateQueries({queryKey:["teams"]}),l.toast.success("Paramètres de l'équipe mis à jour")},onError:x},t[0]=n,t[1]=e):e=t[1],(0,a.useMutation)(e)}function x(){l.toast.error("Erreur lors de la mise à jour des paramètres")}function h(e){let{equipeId:s,data:t}=e;return r.updateTeam(s,t)}function p(e){let a,i,n,l=(0,s.c)(7);l[0]!==e?(a=["team-thresholds",e],i=()=>r.getThresholds(e),l[0]=e,l[1]=a,l[2]=i):(a=l[1],i=l[2]);let c=!!e;return l[3]!==a||l[4]!==i||l[5]!==c?(n={queryKey:a,queryFn:i,enabled:c},l[3]=a,l[4]=i,l[5]=c,l[6]=n):n=l[6],(0,t.useQuery)(n)}function y(){let e,t=(0,s.c)(2),n=(0,i.useQueryClient)();return t[0]!==n?(e={mutationFn:j,onSuccess:e=>{n.invalidateQueries({queryKey:["team-thresholds",e.equipe]}),l.toast.success("Seuil personnalisé créé")},onError:f},t[0]=n,t[1]=e):e=t[1],(0,a.useMutation)(e)}function f(){l.toast.error("Erreur lors de la création du seuil")}function j(e){return r.createThreshold(e)}function g(){let e,t=(0,s.c)(2),n=(0,i.useQueryClient)();return t[0]!==n?(e={mutationFn:v,onSuccess:e=>{n.invalidateQueries({queryKey:["team-thresholds",e.equipe]}),l.toast.success("Seuil personnalisé mis à jour")},onError:N},t[0]=n,t[1]=e):e=t[1],(0,a.useMutation)(e)}function N(){l.toast.error("Erreur lors de la mise à jour du seuil")}function v(e){let{seuilId:s,data:t}=e;return r.updateThreshold(s,t)}function b(){let e,t=(0,s.c)(2),n=(0,i.useQueryClient)();return t[0]!==n?(e={mutationFn:S,onSuccess:(e,s)=>{n.invalidateQueries({queryKey:["team-thresholds",s.equipeId]}),l.toast.success("Seuil personnalisé supprimé")},onError:C},t[0]=n,t[1]=e):e=t[1],(0,a.useMutation)(e)}function C(){l.toast.error("Erreur lors de la suppression du seuil")}function S(e){let{seuilId:s}=e;return r.deleteThreshold(s)}e.s(["useCreateThreshold",()=>y,"useDeleteThreshold",()=>b,"useTeamDetails",()=>d,"useTeamMembers",()=>u,"useTeamThresholds",()=>p,"useTeams",()=>c,"useUpdateTeam",()=>m,"useUpdateThreshold",()=>g],31020)},46897,e=>{"use strict";let s=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>s],46897)},3116,e=>{"use strict";let s=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>s],3116)},95468,e=>{"use strict";let s=(0,e.i(75254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>s],95468)},12420,e=>{"use strict";var s=e.i(43476),t=e.i(932),a=e.i(1851),i=e.i(40165),n=e.i(30374),r=e.i(30009),l=e.i(67881),c=e.i(94179),o=e.i(69035),d=e.i(8655),u=e.i(31278),m=e.i(46897),x=e.i(3116),h=e.i(27612),p=e.i(75254);let y=(0,p.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var f=e.i(37727);let j=(0,p.default)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),g=(0,p.default)("gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);var N=e.i(61911);let v=(0,p.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);var b=e.i(95468);let C=(0,p.default)("circle-play",[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var S=e.i(71645),w=e.i(38401);let E={PLANIFIEE:{label:"Planifiée",className:"bg-blue-50 text-blue-700 border-blue-200"},EN_COURS:{label:"En cours",className:"bg-orange-50 text-orange-700 border-orange-200"},TERMINEE:{label:"Terminée",className:"bg-green-50 text-green-700 border-green-200"},ANNULEE:{label:"Annulée",className:"bg-red-50 text-red-700 border-red-200"}},T={ENTRAINEMENT:"Entraînement",MATCH:"Match",RECUPERATION:"Récupération",AUTRE:"Autre"};function D(e){let p,D,M,q,k,_,F,I,Q,L,R,U=(0,t.c)(37),{seanceId:K,open:z,onOpenChange:$}=e,{data:H,isLoading:B}=(0,d.useSession)(K),O=(0,d.useUpdateSession)(),V=(0,d.useDeleteSession)(),X=(0,d.useDuplicateSession)(),G=(0,d.useChangeSessionStatus)(),[J,W]=(0,S.useState)(!1);U[0]!==V||U[1]!==$||U[2]!==K?(p=async()=>{K&&(await V.mutateAsync(K),W(!1),$(!1))},U[0]=V,U[1]=$,U[2]=K,U[3]=p):p=U[3];let Y=p;U[4]!==X||U[5]!==$||U[6]!==H?(D=async()=>{if(!H)return;let e=new Date(H.dateDebut);e.setDate(e.getDate()+1);let s={dateDebut:e.toISOString()};if(H.dateFin){let t=new Date(H.dateFin).getTime()-new Date(H.dateDebut).getTime();s.dateFin=new Date(e.getTime()+t).toISOString()}await X.mutateAsync({seanceId:H.id,payload:s}),$(!1)},U[4]=X,U[5]=$,U[6]=H,U[7]=D):D=U[7];let Z=D;U[8]!==H||U[9]!==O?(M=async()=>{if(!H)return;let e=window.prompt("Motif de l’annulation (optionnel) ?")||void 0;try{await O.mutateAsync({seanceId:H.id,data:{statut:"ANNULEE",motifAnnulation:e}})}catch(s){s instanceof w.ForceUpdateError&&window.confirm(`${s.message}
Souhaitez-vous forcer la mise \xe0 jour malgr\xe9 les RPE saisis ?`)&&await O.mutateAsync({seanceId:H.id,data:{statut:"ANNULEE",motifAnnulation:e},forceUpdate:!0})}},U[8]=H,U[9]=O,U[10]=M):M=U[10];let ee=M;return z&&K?(U[11]!==G||U[12]!==X||U[13]!==ee||U[14]!==Z||U[15]!==B||U[16]!==H||U[17]!==O?(q=(0,s.jsx)(n.DialogContent,{className:"sm:max-w-[600px]",children:B?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.DialogHeader,{children:(0,s.jsx)(n.DialogTitle,{children:"Chargement..."})}),(0,s.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,s.jsx)(u.Loader2,{className:"h-8 w-8 animate-spin text-primary"})})]}):H?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.DialogHeader,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.DialogTitle,{className:"text-2xl",children:T[H.type]}),(0,s.jsx)(n.DialogDescription,{children:(0,a.format)(new Date(H.dateDebut),"PPP",{locale:i.fr})})]}),(0,s.jsx)(c.Badge,{variant:"outline",className:E[H.statut].className,children:E[H.statut].label})]})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,s.jsx)(x.Clock,{className:"h-5 w-5 text-slate-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Horaire"}),(0,s.jsxs)("p",{className:"text-slate-600",children:[(0,a.format)(new Date(H.dateDebut),"HH:mm"),H.dateFin&&(0,s.jsxs)(s.Fragment,{children:[" - ",(0,a.format)(new Date(H.dateFin),"HH:mm")]})]})]})]}),H.dureePrevue&&(0,s.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,s.jsx)(j,{className:"h-5 w-5 text-slate-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Durée prévue"}),(0,s.jsxs)("p",{className:"text-slate-600",children:[H.dureePrevue," minutes"]})]})]}),"number"==typeof H.intensitePrevue&&(0,s.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,s.jsx)(g,{className:"h-5 w-5 text-slate-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Intensité prévue"}),(0,s.jsxs)("p",{className:"text-slate-600",children:[H.intensitePrevue," / 10"]})]})]}),H.lieu&&(0,s.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,s.jsx)(m.MapPin,{className:"h-5 w-5 text-slate-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Lieu"}),(0,s.jsx)("p",{className:"text-slate-600",children:H.lieu})]})]}),H.description&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Separator,{}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium mb-2",children:"Description"}),(0,s.jsx)("p",{className:"text-sm text-slate-600 whitespace-pre-wrap",children:H.description})]})]})]}),(0,s.jsx)(o.Separator,{}),H.participants&&H.participants.length>0&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-700",children:[(0,s.jsx)(N.Users,{className:"h-4 w-4"}),"Participants (",H.participants.length,")"]}),(0,s.jsx)("div",{className:"space-y-2",children:H.participants.map(A)})]}),H.activites&&H.activites.length>0&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-700",children:[(0,s.jsx)(v,{className:"h-4 w-4"}),"Activités prévues"]}),(0,s.jsx)("div",{className:"space-y-2",children:H.activites.map(P)})]}),(H.participants?.length||H.activites?.length)&&(0,s.jsx)(o.Separator,{}),(0,s.jsxs)("div",{className:"flex gap-2 flex-wrap",children:["PLANIFIEE"===H.statut&&(0,s.jsxs)(l.Button,{variant:"default",size:"sm",onClick:()=>G.mutate({seanceId:H.id,statut:"EN_COURS"}),disabled:G.isPending,children:[G.isPending?(0,s.jsx)(u.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,s.jsx)(C,{className:"h-4 w-4 mr-2"}),"Commencer"]}),("PLANIFIEE"===H.statut||"EN_COURS"===H.statut)&&(0,s.jsxs)(l.Button,{variant:"default",size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>G.mutate({seanceId:H.id,statut:"TERMINEE"}),disabled:G.isPending,children:[G.isPending?(0,s.jsx)(u.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,s.jsx)(b.CheckCircle2,{className:"h-4 w-4 mr-2"}),"Terminer"]}),(0,s.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:Z,disabled:X.isPending,children:[X.isPending?(0,s.jsx)(u.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,s.jsx)(y,{className:"h-4 w-4 mr-2"}),"Dupliquer"]}),"PLANIFIEE"===H.statut&&(0,s.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:ee,disabled:O.isPending,children:[O.isPending?(0,s.jsx)(u.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,s.jsx)(f.X,{className:"h-4 w-4 mr-2"}),"Annuler la séance"]}),(0,s.jsxs)(l.Button,{variant:"destructive",size:"sm",onClick:()=>W(!0),className:"ml-auto",children:[(0,s.jsx)(h.Trash2,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.DialogHeader,{children:(0,s.jsx)(n.DialogTitle,{children:"Séance introuvable"})}),(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-slate-600",children:"Cette séance n'existe pas ou a été supprimée."})})]})}),U[11]=G,U[12]=X,U[13]=ee,U[14]=Z,U[15]=B,U[16]=H,U[17]=O,U[18]=q):q=U[18],U[19]!==$||U[20]!==z||U[21]!==q?(k=(0,s.jsx)(n.Dialog,{open:z,onOpenChange:$,children:q}),U[19]=$,U[20]=z,U[21]=q,U[22]=k):k=U[22],U[23]===Symbol.for("react.memo_cache_sentinel")?(_=(0,s.jsxs)(r.AlertDialogHeader,{children:[(0,s.jsx)(r.AlertDialogTitle,{children:"Confirmer la suppression"}),(0,s.jsx)(r.AlertDialogDescription,{children:"Êtes-vous sûr de vouloir supprimer cette séance ? Cette action est irréversible."})]}),U[23]=_):_=U[23],U[24]===Symbol.for("react.memo_cache_sentinel")?(F=(0,s.jsx)(r.AlertDialogCancel,{children:"Annuler"}),U[24]=F):F=U[24],U[25]!==V.isPending?(I=V.isPending&&(0,s.jsx)(u.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),U[25]=V.isPending,U[26]=I):I=U[26],U[27]!==V.isPending||U[28]!==Y||U[29]!==I?(Q=(0,s.jsxs)(r.AlertDialogContent,{children:[_,(0,s.jsxs)(r.AlertDialogFooter,{children:[F,(0,s.jsxs)(r.AlertDialogAction,{onClick:Y,className:"bg-red-600 hover:bg-red-700",disabled:V.isPending,children:[I,"Supprimer"]})]})]}),U[27]=V.isPending,U[28]=Y,U[29]=I,U[30]=Q):Q=U[30],U[31]!==J||U[32]!==Q?(L=(0,s.jsx)(r.AlertDialog,{open:J,onOpenChange:W,children:Q}),U[31]=J,U[32]=Q,U[33]=L):L=U[33],U[34]!==L||U[35]!==k?(R=(0,s.jsxs)(s.Fragment,{children:[k,L]}),U[34]=L,U[35]=k,U[36]=R):R=U[36],R):null}function P(e){return(0,s.jsxs)("div",{className:"rounded-md border p-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-slate-700",children:[(0,s.jsxs)("span",{className:"font-medium",children:[e.ordre?`${e.ordre}. `:"",e.type]}),(0,s.jsxs)("span",{className:"text-xs text-slate-500",children:[e.duree?`${e.duree} min`:"Durée N/C","number"==typeof e.intensite?` • Intensit\xe9 ${e.intensite}`:""]})]}),e.objectif&&(0,s.jsx)("p",{className:"mt-2 text-sm text-slate-600",children:e.objectif})]},`${e.ordre}-${e.type}`)}function A(e){return(0,s.jsxs)("div",{className:"flex items-center justify-between rounded-md border p-2 text-sm text-slate-600",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-medium text-slate-800",children:[e.prenoms," ",e.nom]}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:e.email})]}),e.present&&(0,s.jsx)("span",{className:"text-xs font-medium text-green-600",children:"Présent"})]},e.id)}e.s(["SessionDetailsDialog",()=>D],12420)},61323,e=>{"use strict";var s=e.i(43476),t=e.i(932),a=e.i(71645),i=e.i(8655),n=e.i(38552),r=e.i(1851),l=e.i(40165),c=e.i(70065),o=e.i(94179),d=e.i(67881),u=e.i(87316),m=e.i(46897),x=e.i(3116),h=e.i(63059),p=e.i(21218);let y={PLANIFIEE:{label:"Planifiée",variant:"default",className:"bg-blue-50 text-blue-700 border-blue-200"},EN_COURS:{label:"En cours",variant:"secondary",className:"bg-orange-50 text-orange-700 border-orange-200"},TERMINEE:{label:"Terminée",variant:"outline",className:"bg-green-50 text-green-700 border-green-200"},ANNULEE:{label:"Annulée",variant:"destructive",className:"bg-red-50 text-red-700 border-red-200"}},f={ENTRAINEMENT:{label:"Entraînement",icon:p.Activity},MATCH:{label:"Match",icon:p.Activity},RECUPERATION:{label:"Récupération",icon:p.Activity},AUTRE:{label:"Autre",icon:p.Activity}};function j(e){let a,i,n=(0,t.c)(8),{sessions:p,onSelectSession:j}=e;if(0===p.length){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(c.Card,{children:(0,s.jsxs)(c.CardContent,{className:"flex flex-col items-center justify-center h-96 text-center",children:[(0,s.jsx)(u.Calendar,{className:"h-12 w-12 text-slate-300 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Aucune séance"}),(0,s.jsx)("p",{className:"text-slate-600",children:"Créez votre première séance pour commencer"})]})}),n[0]=e):e=n[0],e}if(n[1]!==j||n[2]!==p){let e;n[4]!==j?(e=e=>{let t=y[e.statut],a=f[e.type],i=a.icon;return(0,s.jsx)(c.Card,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>j(e.id),children:(0,s.jsx)(c.CardContent,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,s.jsx)(i,{className:"h-5 w-5 text-primary"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h3",{className:"font-semibold text-slate-900",children:a.label}),(0,s.jsx)(o.Badge,{variant:"outline",className:t.className,children:t.label})]}),(0,s.jsx)("p",{className:"text-sm text-slate-600 mt-1",children:(0,r.format)(new Date(e.dateDebut),"PPP",{locale:l.fr})})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-slate-600",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(x.Clock,{className:"h-4 w-4"}),(0,r.format)(new Date(e.dateDebut),"HH:mm"),e.dateFin&&(0,s.jsxs)("span",{children:[" - ",(0,r.format)(new Date(e.dateFin),"HH:mm")]})]}),e.lieu&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m.MapPin,{className:"h-4 w-4"}),e.lieu]})]}),e.description&&(0,s.jsx)("p",{className:"text-sm text-slate-600 line-clamp-2",children:e.description})]}),(0,s.jsx)(d.Button,{variant:"ghost",size:"icon",className:"ml-4",children:(0,s.jsx)(h.ChevronRight,{className:"h-5 w-5"})})]})})},e.id)},n[4]=j,n[5]=e):e=n[5],a=p.map(e),n[1]=j,n[2]=p,n[3]=a}else a=n[3];return n[6]!==a?(i=(0,s.jsx)("div",{className:"space-y-4",children:a}),n[6]=a,n[7]=i):i=n[7],i}var g=e.i(10708),N=e.i(57734),v=e.i(59377),b=e.i(47697),C=e.i(37727),S=e.i(47163);function w(e){let i,n,o,u,m,x,h,p,y,f,j,w,E,T,D,P,A,M,q,k,_,F,I=(0,t.c)(52),{filters:Q,onFiltersChange:L}=e;I[0]!==Q.date_debut?(i=Q.date_debut?new Date(Q.date_debut):void 0,I[0]=Q.date_debut,I[1]=i):i=I[1];let[R,U]=(0,a.useState)(i);I[2]!==Q.date_fin?(n=Q.date_fin?new Date(Q.date_fin):void 0,I[2]=Q.date_fin,I[3]=n):n=I[3];let[K,z]=(0,a.useState)(n);I[4]!==Q||I[5]!==L?(o=e=>{U(e),L({...Q,date_debut:e?(0,r.format)(e,"yyyy-MM-dd"):void 0})},I[4]=Q,I[5]=L,I[6]=o):o=I[6];let $=o;I[7]!==Q||I[8]!==L?(u=e=>{z(e),L({...Q,date_fin:e?(0,r.format)(e,"yyyy-MM-dd"):void 0})},I[7]=Q,I[8]=L,I[9]=u):u=I[9];let H=u;I[10]!==L?(m=()=>{U(void 0),z(void 0),L({})},I[10]=L,I[11]=m):m=I[11];let B=m,O=R||K;I[12]===Symbol.for("react.memo_cache_sentinel")?(x=(0,s.jsx)(g.Label,{children:"Date de début"}),I[12]=x):x=I[12];let V=!R&&"text-muted-foreground";I[13]!==V?(h=(0,S.cn)("w-full justify-start text-left font-normal",V),I[13]=V,I[14]=h):h=I[14],I[15]===Symbol.for("react.memo_cache_sentinel")?(p=(0,s.jsx)(b.CalendarIcon,{className:"mr-2 h-4 w-4"}),I[15]=p):p=I[15],I[16]!==R?(y=R?(0,r.format)(R,"PPP",{locale:l.fr}):(0,s.jsx)("span",{children:"Sélectionner"}),I[16]=R,I[17]=y):y=I[17],I[18]!==y||I[19]!==h?(f=(0,s.jsx)(v.PopoverTrigger,{asChild:!0,children:(0,s.jsxs)(d.Button,{variant:"outline",className:h,children:[p,y]})}),I[18]=y,I[19]=h,I[20]=f):f=I[20],I[21]!==R||I[22]!==$?(j=(0,s.jsx)(v.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(N.Calendar,{mode:"single",selected:R,onSelect:$,initialFocus:!0,locale:l.fr})}),I[21]=R,I[22]=$,I[23]=j):j=I[23],I[24]!==f||I[25]!==j?(w=(0,s.jsxs)("div",{className:"flex-1 min-w-[200px] space-y-2",children:[x,(0,s.jsxs)(v.Popover,{children:[f,j]})]}),I[24]=f,I[25]=j,I[26]=w):w=I[26],I[27]===Symbol.for("react.memo_cache_sentinel")?(E=(0,s.jsx)(g.Label,{children:"Date de fin"}),I[27]=E):E=I[27];let X=!K&&"text-muted-foreground";return I[28]!==X?(T=(0,S.cn)("w-full justify-start text-left font-normal",X),I[28]=X,I[29]=T):T=I[29],I[30]===Symbol.for("react.memo_cache_sentinel")?(D=(0,s.jsx)(b.CalendarIcon,{className:"mr-2 h-4 w-4"}),I[30]=D):D=I[30],I[31]!==K?(P=K?(0,r.format)(K,"PPP",{locale:l.fr}):(0,s.jsx)("span",{children:"Sélectionner"}),I[31]=K,I[32]=P):P=I[32],I[33]!==T||I[34]!==P?(A=(0,s.jsx)(v.PopoverTrigger,{asChild:!0,children:(0,s.jsxs)(d.Button,{variant:"outline",className:T,children:[D,P]})}),I[33]=T,I[34]=P,I[35]=A):A=I[35],I[36]!==R?(M=e=>!!R&&e<R,I[36]=R,I[37]=M):M=I[37],I[38]!==K||I[39]!==H||I[40]!==M?(q=(0,s.jsx)(v.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(N.Calendar,{mode:"single",selected:K,onSelect:H,initialFocus:!0,locale:l.fr,disabled:M})}),I[38]=K,I[39]=H,I[40]=M,I[41]=q):q=I[41],I[42]!==A||I[43]!==q?(k=(0,s.jsxs)("div",{className:"flex-1 min-w-[200px] space-y-2",children:[E,(0,s.jsxs)(v.Popover,{children:[A,q]})]}),I[42]=A,I[43]=q,I[44]=k):k=I[44],I[45]!==B||I[46]!==O?(_=O&&(0,s.jsx)(d.Button,{variant:"outline",size:"icon",onClick:B,title:"Réinitialiser les filtres",children:(0,s.jsx)(C.X,{className:"h-4 w-4"})}),I[45]=B,I[46]=O,I[47]=_):_=I[47],I[48]!==w||I[49]!==k||I[50]!==_?(F=(0,s.jsx)(c.Card,{children:(0,s.jsx)(c.CardContent,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-end gap-4 flex-wrap",children:[w,k,_]})})}),I[48]=w,I[49]=k,I[50]=_,I[51]=F):F=I[51],F}var E=e.i(68046),T=e.i(12420),D=e.i(27341),P=e.i(7233),A=e.i(31278);function M(){let e,r,l,o,u,m,x,h,p,y,f,g,N,v,b,C=(0,t.c)(35),{currentTeam:S}=(0,n.useTeamStore)(),[M,F]=(0,a.useState)(!1),[I,Q]=(0,a.useState)(null);C[0]===Symbol.for("react.memo_cache_sentinel")?(e={},C[0]=e):e=C[0];let[L,R]=(0,a.useState)(e),{data:U,isLoading:K}=(0,i.useSessions)(S?.id||"",L);C[1]===Symbol.for("react.memo_cache_sentinel")?(r=(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:"Séances"}),(0,s.jsx)("p",{className:"text-slate-600 mt-1 text-sm sm:text-base",children:"Gérez toutes vos séances d'entraînement et matchs"})]}),C[1]=r):r=C[1],C[2]===Symbol.for("react.memo_cache_sentinel")?(l=()=>F(!0),C[2]=l):l=C[2],C[3]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r,(0,s.jsxs)(d.Button,{onClick:l,className:"w-full sm:w-auto",children:[(0,s.jsx)(P.Plus,{className:"h-4 w-4 mr-2"}),"Nouvelle séance"]})]}),C[3]=o):o=C[3],C[4]!==L?(u=(0,s.jsx)(w,{filters:L,onFiltersChange:R}),C[4]=L,C[5]=u):u=C[5],C[6]===Symbol.for("react.memo_cache_sentinel")?(m=(0,s.jsxs)(D.TabsList,{className:"w-full grid grid-cols-2 sm:grid-cols-4 sm:w-auto",children:[(0,s.jsx)(D.TabsTrigger,{value:"all",className:"text-xs sm:text-sm",children:"Toutes"}),(0,s.jsx)(D.TabsTrigger,{value:"PLANIFIEE",className:"text-xs sm:text-sm",children:"Planifiées"}),(0,s.jsx)(D.TabsTrigger,{value:"TERMINEE",className:"text-xs sm:text-sm",children:"Terminées"}),(0,s.jsx)(D.TabsTrigger,{value:"ANNULEE",className:"text-xs sm:text-sm",children:"Annulées"})]}),C[6]=m):m=C[6],C[7]!==K||C[8]!==U?(x=(0,s.jsx)(D.TabsContent,{value:"all",className:"space-y-4",children:K?(0,s.jsx)(c.Card,{children:(0,s.jsx)(c.CardContent,{className:"flex items-center justify-center h-96",children:(0,s.jsx)(A.Loader2,{className:"h-8 w-8 animate-spin text-primary"})})}):(0,s.jsx)(j,{sessions:U||[],onSelectSession:Q})}),C[7]=K,C[8]=U,C[9]=x):x=C[9],C[10]!==K||C[11]!==U?(h=(0,s.jsx)(D.TabsContent,{value:"PLANIFIEE",className:"space-y-4",children:K?(0,s.jsx)(c.Card,{children:(0,s.jsx)(c.CardContent,{className:"flex items-center justify-center h-96",children:(0,s.jsx)(A.Loader2,{className:"h-8 w-8 animate-spin text-primary"})})}):(0,s.jsx)(j,{sessions:U?.filter(_)||[],onSelectSession:Q})}),C[10]=K,C[11]=U,C[12]=h):h=C[12],C[13]!==K||C[14]!==U?(p=(0,s.jsx)(D.TabsContent,{value:"TERMINEE",className:"space-y-4",children:K?(0,s.jsx)(c.Card,{children:(0,s.jsx)(c.CardContent,{className:"flex items-center justify-center h-96",children:(0,s.jsx)(A.Loader2,{className:"h-8 w-8 animate-spin text-primary"})})}):(0,s.jsx)(j,{sessions:U?.filter(k)||[],onSelectSession:Q})}),C[13]=K,C[14]=U,C[15]=p):p=C[15],C[16]!==K||C[17]!==U?(y=(0,s.jsx)(D.TabsContent,{value:"ANNULEE",className:"space-y-4",children:K?(0,s.jsx)(c.Card,{children:(0,s.jsx)(c.CardContent,{className:"flex items-center justify-center h-96",children:(0,s.jsx)(A.Loader2,{className:"h-8 w-8 animate-spin text-primary"})})}):(0,s.jsx)(j,{sessions:U?.filter(q)||[],onSelectSession:Q})}),C[16]=K,C[17]=U,C[18]=y):y=C[18],C[19]!==x||C[20]!==h||C[21]!==p||C[22]!==y?(f=(0,s.jsxs)(D.Tabs,{defaultValue:"all",className:"space-y-4",children:[m,x,h,p,y]}),C[19]=x,C[20]=h,C[21]=p,C[22]=y,C[23]=f):f=C[23],C[24]!==M?(g=(0,s.jsx)(E.CreateSessionDialog,{open:M,onOpenChange:F}),C[24]=M,C[25]=g):g=C[25];let z=!!I;return C[26]===Symbol.for("react.memo_cache_sentinel")?(N=e=>!e&&Q(null),C[26]=N):N=C[26],C[27]!==I||C[28]!==z?(v=(0,s.jsx)(T.SessionDetailsDialog,{seanceId:I,open:z,onOpenChange:N}),C[27]=I,C[28]=z,C[29]=v):v=C[29],C[30]!==f||C[31]!==g||C[32]!==v||C[33]!==u?(b=(0,s.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8 space-y-4 sm:space-y-6",children:[o,u,f,g,v]}),C[30]=f,C[31]=g,C[32]=v,C[33]=u,C[34]=b):b=C[34],b}function q(e){return"ANNULEE"===e.statut}function k(e){return"TERMINEE"===e.statut}function _(e){return"PLANIFIEE"===e.statut}e.s(["default",()=>M],61323)}]);